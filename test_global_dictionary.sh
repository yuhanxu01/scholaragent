#!/bin/bash

echo "=== 测试全局双击查词功能 ==="
echo ""
echo "测试说明："
echo "1. 启动前端开发服务器"
echo "2. 登录后访问任意页面"
echo "3. 双击任意英文单词（至少2个字符）"
echo "4. 应该弹出查词窗口"
echo "5. 在查词结果中，双击释义、翻译或例句中的单词，应该能继续查词"
echo ""
echo "测试步骤："
echo ""

# 检查前端是否运行
echo "1. 检查前端服务器状态..."
if curl -s http://localhost:5173 > /dev/null; then
    echo "✅ 前端服务器正在运行"
else
    echo "❌ 前端服务器未运行，请先启动："
    echo "   cd frontend && npm run dev"
    exit 1
fi

echo ""
echo "2. 功能测试点："
echo ""
echo "✅ 基本功能："
echo "   - 双击任意页面上的英文单词应弹出查词窗口"
echo "   - 查词窗口显示单词释义、翻译、例句等信息"
echo "   - 支持添加到生词本功能"
echo "   - 支持播放发音功能"
echo ""
echo "✅ 高级功能："
echo "   - 在查词结果中双击释义中的单词可继续查词"
echo "   - 在查词结果中双击翻译中的单词可继续查词"
echo "   - 在查词结果中双击例句中的单词可继续查词"
echo "   - 在查词结果中双击上下文中的单词可继续查词"
echo ""
echo "✅ 交互优化："
echo "   - 查词窗口显示在鼠标双击位置附近"
echo "   - 点击外部区域或按ESC键关闭查词窗口"
echo "   - 避免在输入框、按钮等交互元素上触发查词"
echo "   - 查词窗口不会超出屏幕边界"
echo ""
echo "3. 注意事项："
echo "   - 双击的单词需要至少2个字符才会触发查词"
echo "   - 输入框、按钮等交互元素上不会触发查词"
echo "   - 查词窗口内部不会触发新的查词（避免循环）"
echo ""
echo "请手动测试以上功能点！"